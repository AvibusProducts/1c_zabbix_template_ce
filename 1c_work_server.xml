<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>4.4</version>
    <date>2020-02-04T09:02:00Z</date>
    <groups>
        <group>
            <name>Templates (Kaminsoft)</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Template App 1C Enterprise Work Server</template>
            <name>Template App 1C Enterprise Work Server</name>
            <groups>
                <group>
                    <name>Templates (Kaminsoft)</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>[1C] Информация</name>
                </application>
                <application>
                    <name>[1C] Производительность</name>
                </application>
                <application>
                    <name>[1C] Устойчивость системы</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>[1C/Серверные вызовы] ТОП по суммарному количеству</name>
                    <key>1c.rphost.calls[{$LOG_DIR},count,{$TOP_CALL_LIMIT}]</key>
                    <delay>1h</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>[1C/Серверные вызовы] ТОП  по суммарному процессорному времени</name>
                    <key>1c.rphost.calls[{$LOG_DIR},cpu,{$TOP_CALL_LIMIT}]</key>
                    <delay>1h</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>[1C/Серверные вызовы] ТОП по суммарной длительности</name>
                    <key>1c.rphost.calls[{$LOG_DIR},duration,{$TOP_CALL_LIMIT}]</key>
                    <delay>1h</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>[1C/Серверные вызовы] ТОП по средней длительности</name>
                    <key>1c.rphost.calls[{$LOG_DIR},dur_avg,{$TOP_CALL_LIMIT}]</key>
                    <delay>1h</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>[1C/Серверные вызовы] ТОП &quot;ленивых&quot; вызовов</name>
                    <key>1c.rphost.calls[{$LOG_DIR},lazy,{$TOP_CALL_LIMIT}]</key>
                    <delay>1h</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>[1C/Серверные вызовы] ТОП по максимальной памяти за вызов</name>
                    <key>1c.rphost.calls[{$LOG_DIR},memory,{$TOP_CALL_LIMIT}]</key>
                    <delay>1h</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>[1C/Рабочий процесс] Число процессов</name>
                    <type>DEPENDENT</type>
                    <key>1c.rphost.count</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <params>(\d+):\d+:\d+
\1</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>1c.rphost.summary</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{last()}=0</expression>
                            <name>[1C/Рабочий процесс] Нет запущенных рабочих процессов</name>
                            <priority>HIGH</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>[1C/Рабочий процесс/IO] Сводка</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>1c.rphost.io</key>
                    <delay>30s</delay>
                    <history>0</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>[1C] Информация</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>[1C/Рабочий процесс/IO] Операции чтения</name>
                    <type>DEPENDENT</type>
                    <key>1c.rphost.io.mread</key>
                    <delay>0</delay>
                    <units>B/s</units>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <params>(\d+):\d+:\d+:\d+
\1</params>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <params/>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>1c.rphost.io</key>
                    </master_item>
                </item>
                <item>
                    <name>[1C/Рабочий процесс/IO] Операции записи</name>
                    <type>DEPENDENT</type>
                    <key>1c.rphost.io.mwrite</key>
                    <delay>0</delay>
                    <units>B/s</units>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <params>\d+:(\d+):\d+:\d+
\1</params>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <params/>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>1c.rphost.io</key>
                    </master_item>
                </item>
                <item>
                    <name>[1C/Рабочий процесс/IO] Чтение с диска</name>
                    <type>DEPENDENT</type>
                    <key>1c.rphost.io.read</key>
                    <delay>0</delay>
                    <units>B/s</units>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <params>\d+:\d+:(\d+):\d+
\1</params>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <params/>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>1c.rphost.io</key>
                    </master_item>
                </item>
                <item>
                    <name>[1C/Рабочий процесс/IO] Запись на диск</name>
                    <type>DEPENDENT</type>
                    <key>1c.rphost.io.write</key>
                    <delay>0</delay>
                    <units>B/s</units>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <params>\d+:\d+:\d+:(\d+)
\1</params>
                        </step>
                        <step>
                            <type>CHANGE_PER_SECOND</type>
                            <params/>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>1c.rphost.io</key>
                    </master_item>
                </item>
                <item>
                    <name>[1C/Управляемые блокировки] Число взаимоблокировок</name>
                    <type>DEPENDENT</type>
                    <key>1c.rphost.locks.deadlock</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <params>\d+.?\d*:\d+:(\d+)
\1</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>1c.rphost.locks[{$LOG_DIR},{$MAX_LOCK_WAIT},{$RAS_PORT}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <name>[1C/Управляемые блокировки] Обнаружены взаимоблокировки</name>
                            <priority>HIGH</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>[1C/Управляемые блокировки] Число таймаутов</name>
                    <type>DEPENDENT</type>
                    <key>1c.rphost.locks.timeout</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <params>\d+.?\d*:(\d+):\d+
\1</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>1c.rphost.locks[{$LOG_DIR},{$MAX_LOCK_WAIT},{$RAS_PORT}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;0</expression>
                            <name>[1C/Управляемые блокировки] Обнаружены таймауты</name>
                            <priority>HIGH</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>[1C/Управляемые блокировки] Общее ожидание на блокировках</name>
                    <type>DEPENDENT</type>
                    <key>1c.rphost.locks.wait</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <value_type>FLOAT</value_type>
                    <units>s</units>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <params>(\d+.?\d*):\d+:\d+
\1</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>1c.rphost.locks[{$LOG_DIR},{$MAX_LOCK_WAIT},{$RAS_PORT}]</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{last()}&gt;{$MAX_LOCK_WAIT}</expression>
                            <name>[1C/Управляемые блокировки] Превышено пороговое значение ожидания на блокировках</name>
                            <priority>HIGH</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>[1C/Управляемые блокировки] Сводка</name>
                    <key>1c.rphost.locks[{$LOG_DIR},{$MAX_LOCK_WAIT},{$RAS_PORT}]</key>
                    <delay>1h</delay>
                    <history>30d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>[1C] Информация</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>[1C/Рабочий процесс] Объем используемой памяти</name>
                    <type>DEPENDENT</type>
                    <key>1c.rphost.memory</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <units>B</units>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <params>\d+:(\d+):\d+
\1</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>1c.rphost.summary</key>
                    </master_item>
                </item>
                <item>
                    <name>[1C/Рабочий процесс] Число открытых файлов</name>
                    <type>DEPENDENT</type>
                    <key>1c.rphost.nofile</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <params>\d+:\d+:\d+:\d+:(\d+)
\1</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>1c.rphost.summary</key>
                    </master_item>
                </item>
                <item>
                    <name>[1C/Рабочий процесс] Число входящих TCP-сессий</name>
                    <type>DEPENDENT</type>
                    <key>1c.rphost.sessions</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <params>\d+:\d+:(\d+)
\1</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>1c.rphost.summary</key>
                    </master_item>
                </item>
                <item>
                    <name>[1C/Рабочий процесс] Сводка</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>1c.rphost.summary</key>
                    <delay>30s</delay>
                    <history>0</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>[1C] Информация</name>
                        </application>
                    </applications>
                </item>
                <item>
                    <name>[1C/Рабочий процесс] Стабильность</name>
                    <type>DEPENDENT</type>
                    <key>1c.rphost.unfailing</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>[1C] Устойчивость системы</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <params>\d+:\d+:\d+:(\d+)
\1</params>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>1c.rphost.summary</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <expression>{count(5m,0)}&gt;=3</expression>
                            <name>[1C/Рабочий процес] Частые перезапуски рабочих процессов</name>
                            <priority>HIGH</priority>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <name>[1C] Объем памяти сервера</name>
                    <type>ZABBIX_ACTIVE</type>
                    <key>vm.memory.size</key>
                    <delay>1h</delay>
                    <history>30d</history>
                    <trends>90d</trends>
                    <units>B</units>
                    <applications>
                        <application>
                            <name>[1C] Производительность</name>
                        </application>
                    </applications>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$LOGCFG_XML}</macro>
                    <value>/opt/1C/v8.3/x86_64/conf/logcfg.xml</value>
                </macro>
                <macro>
                    <macro>{$LOG_DIR}</macro>
                    <value>/var/log/1C</value>
                </macro>
                <macro>
                    <macro>{$MAX_LOCK_WAIT}</macro>
                    <value>5</value>
                </macro>
                <macro>
                    <macro>{$RAS_PORT}</macro>
                    <value>1545</value>
                </macro>
                <macro>
                    <macro>{$RPHOST_MAX_MEM}</macro>
                    <value>0.85</value>
                </macro>
                <macro>
                    <macro>{$TOP_CALL_LIMIT}</macro>
                    <value>25</value>
                </macro>
            </macros>
        </template>
    </templates>
    <triggers>
        <trigger>
            <expression>{Template App 1C Enterprise Work Server:1c.rphost.memory.last()}/{Template App 1C Enterprise Work Server:vm.memory.size.last()}&gt;{$RPHOST_MAX_MEM}</expression>
            <name>[1C/Рабочий процесс] Превышено пороговое значение используемой памяти</name>
            <priority>AVERAGE</priority>
        </trigger>
    </triggers>
    <graphs>
        <graph>
            <name>[1C/Рабочий процесс/IO] Операции ввода-вывода</name>
            <graph_items>
                <graph_item>
                    <color>2774A4</color>
                    <item>
                        <host>Template App 1C Enterprise Work Server</host>
                        <key>1c.rphost.io.mread</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>1</sortorder>
                    <color>F7941D</color>
                    <item>
                        <host>Template App 1C Enterprise Work Server</host>
                        <key>1c.rphost.io.mwrite</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>2</sortorder>
                    <color>199C0D</color>
                    <yaxisside>RIGHT</yaxisside>
                    <item>
                        <host>Template App 1C Enterprise Work Server</host>
                        <key>1c.rphost.io.read</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>3</sortorder>
                    <color>F63100</color>
                    <item>
                        <host>Template App 1C Enterprise Work Server</host>
                        <key>1c.rphost.io.write</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
        <graph>
            <name>[1C/Рабочий процесс] Объем используемой памяти</name>
            <graph_items>
                <graph_item>
                    <color>199C0D</color>
                    <item>
                        <host>Template App 1C Enterprise Work Server</host>
                        <key>1c.rphost.memory</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>1</sortorder>
                    <color>F63100</color>
                    <item>
                        <host>Template App 1C Enterprise Work Server</host>
                        <key>vm.memory.size</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>2</sortorder>
                    <color>0040FF</color>
                    <yaxisside>RIGHT</yaxisside>
                    <item>
                        <host>Template App 1C Enterprise Work Server</host>
                        <key>1c.rphost.count</key>
                    </item>
                </graph_item>
                <graph_item>
                    <sortorder>3</sortorder>
                    <color>F7941D</color>
                    <yaxisside>RIGHT</yaxisside>
                    <item>
                        <host>Template App 1C Enterprise Work Server</host>
                        <key>1c.rphost.unfailing</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
        <graph>
            <name>[1C/Рабочий процесс] Число входящих TCP-сессий</name>
            <graph_items>
                <graph_item>
                    <color>FF4000</color>
                    <item>
                        <host>Template App 1C Enterprise Work Server</host>
                        <key>1c.rphost.sessions</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
    </graphs>
</zabbix_export>
